package cn.cenjp.platform.controller;import cn.cenjp.platform.bean.Cart;import cn.cenjp.platform.bean.MySpike;import cn.cenjp.platform.bean.User;import cn.cenjp.platform.result.CodeMsg;import cn.cenjp.platform.result.Result;import cn.cenjp.platform.service.GoodService;import cn.cenjp.platform.service.UserService;import cn.cenjp.platform.vo.GoodVo;import cn.cenjp.platform.vo.Order;import com.github.pagehelper.PageHelper;import com.github.pagehelper.PageInfo;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.security.crypto.password.PasswordEncoder;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.*;import java.lang.reflect.Method;import java.util.List;/** * 为安卓提供的服务器接口 */@RestController@RequestMapping("/Android")public class androidApi{    @Value("${pageSize}")    private Integer pageSize;    @Autowired    UserService userService;    @Autowired    private PasswordEncoder passwordEncoder;    @Autowired    private GoodService goodService;    /**     * 登录接口     * @param phone 用户名     * @param password 密码     * @return 成功返回用户数据     */    @RequestMapping(value = "/login",method = RequestMethod.POST)    public Result<User> doLogin(@RequestParam("phone")String phone, @RequestParam("password")String password){        User user = userService.getUserByPhone(phone);        if (user==null){            return Result.error(CodeMsg.MOBILE_NOT_EXIST);        }        else if (passwordEncoder.encode(password).equals(user.getUser_password())){            return Result.success(user);        }else{            return Result.error(CodeMsg.PASSWORD_ERROR);        }    }    /**     *分页获取商品接口     * @param goodKind 商品种类     * @param  pageIndex 页码     * @return 返回商品数据     */    @RequestMapping(value = "/getList/{goodKind}/{pageIndex}")    public Result<List<GoodVo>> getGood(@PathVariable("goodKind") String goodKind, @PathVariable("pageIndex") Integer pageIndex){        PageHelper.startPage(pageIndex, pageSize);        List<GoodVo> goodVoList = goodService.getGoodVoList(goodKind);        PageInfo<GoodVo> pageInfo = new PageInfo<>(goodVoList);        List<GoodVo> list = pageInfo.getList();        if (list.isEmpty()){            return Result.error(CodeMsg.GOOD_NO_MORE);        }else{            return Result.success(list);        }    }    /**     * 获得商品详细信息     * @param goodId 商品id     * @return     */    @RequestMapping(value = "/getGood/{goodId}")    public Result<GoodVo> getGoodInfo(@PathVariable("goodId") String goodId){        GoodVo vo = goodService.getGoodVo(goodId);        if (vo==null)            return Result.error(CodeMsg.GOOD_NOT_EXIST);        return Result.success(vo);    }    /**     * 秒杀商品     * @param goodId 商品id     * @param spikeId 秒杀id     * @return 返回订单信息     */    @RequestMapping(value = "/doSpike/{goodId}/{spikeId}")    public Result<Order> doSpilke(@PathVariable("goodId") String goodId, @PathVariable("spikeId") Integer spikeId){        return null;    }    /**     * 获得个人秒杀的商品信息     * @param phone 手机号码     * @return 返回秒杀的商品列表     */    @RequestMapping(value = "/getMySpike/{phone}")    public Result<List<MySpike>> getMySpike(@PathVariable("phone") String phone){        return null;    }}